---

---

<section id="disponibilidad" class="py-20 bg-white relative overflow-hidden">
  <!-- Decorative Background Elements -->
  <div
    class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none"
  >
    <div
      class="absolute top-10 left-10 w-32 h-32 bg-primary-100 rounded-full blur-3xl opacity-40"
    >
    </div>
    <div
      class="absolute bottom-10 right-10 w-40 h-40 bg-secondary-100 rounded-full blur-3xl opacity-40"
    >
    </div>
  </div>

  <div class="container mx-auto px-4 relative z-10">
    <div class="text-center max-w-3xl mx-auto mb-12">
      <h2 class="text-4xl md:text-5xl font-extrabold mb-4 text-gray-800">
        <span class="text-primary-600">Calendario</span> de Disponibilidad
      </h2>
      <p class="text-xl text-gray-600">
        Consulta nuestras fechas libres y reserva tu evento con antelación.
        <br />
        <span class="text-sm text-gray-500 italic"
          >* Las fechas en rojo ya están reservadas.</span
        >
      </p>
    </div>

    <div
      class="max-w-4xl mx-auto bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100"
    >
      <!-- Calendar Header -->
      <div
        class="bg-gradient-to-r from-primary-500 to-secondary-500 p-6 text-white flex items-center justify-between"
      >
        <button
          id="prevMonth"
          class="p-2 hover:bg-white/20 rounded-full transition-colors focus:outline-none"
          aria-label="Mes anterior"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>
        <h3 id="currentMonthYear" class="text-2xl font-bold capitalize"></h3>
        <button
          id="nextMonth"
          class="p-2 hover:bg-white/20 rounded-full transition-colors focus:outline-none"
          aria-label="Siguiente mes"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
      </div>

      <!-- Days Grid -->
      <div class="p-6">
        <!-- Weekday Headers -->
        <div class="grid grid-cols-7 mb-4 text-center">
          <div class="font-bold text-gray-400 text-sm">Lun</div>
          <div class="font-bold text-gray-400 text-sm">Mar</div>
          <div class="font-bold text-gray-400 text-sm">Mié</div>
          <div class="font-bold text-gray-400 text-sm">Jue</div>
          <div class="font-bold text-gray-400 text-sm">Vie</div>
          <div class="font-bold text-gray-400 text-sm">Sáb</div>
          <div class="font-bold text-gray-400 text-sm">Dom</div>
        </div>

        <!-- Calendar Days -->
        <div id="calendarDays" class="grid grid-cols-7 gap-2">
          <!-- Days will be injected here via JS -->
        </div>
      </div>

      <!-- Legend / Call to Action -->
      <div
        class="bg-gray-50 p-4 border-t border-gray-100 flex flex-col md:flex-row items-center justify-between gap-4"
      >
        <div class="flex gap-4 text-sm">
          <div class="flex items-center gap-2">
            <div
              class="w-3 h-3 rounded-full bg-green-100 border border-green-300"
            >
            </div>
            <span class="text-gray-600">Disponible</span>
          </div>
          <div class="flex items-center gap-2">
            <div class="w-3 h-3 rounded-full bg-red-100 border border-red-300">
            </div>
            <span class="text-gray-600">Ocupado</span>
          </div>
        </div>
        <a
          href="#contacto"
          class="text-primary-600 font-bold hover:text-primary-700 hover:underline text-sm"
        >
          ¿Tu fecha está libre? ¡Reserva ahora! →
        </a>
      </div>
    </div>
  </div>
</section>

<script>
  // Calendar Logic
  document.addEventListener('DOMContentLoaded', () => {
    const calendarDays = document.getElementById('calendarDays');
    const currentMonthYear = document.getElementById('currentMonthYear');
    const prevBtn = document.getElementById('prevMonth');
    const nextBtn = document.getElementById('nextMonth');

    let currentDate = new Date();

    // Mock occupied dates (simple array of day strings for demo purposes)
    // In a real app, this would come from a database/API
    // Let's pretend some random dates are occupied in the current and next month
    const occupiedDates = [5, 12, 18, 19, 25, 26];

    function renderCalendar(date) {
      const year = date.getFullYear();
      const month = date.getMonth();

      // Update header
      const monthName = new Intl.DateTimeFormat('es-ES', {
        month: 'long',
      }).format(date);
      currentMonthYear.textContent = `${monthName} ${year}`;

      // First day of the month
      // Adjusted for Monday start (0 = Monday, 6 = Sunday)
      const firstDay = new Date(year, month, 1).getDay();
      // Convert Sunday (0) to 7 so we can subtract 1 safely for 0-indexed Monday array
      const adjustedFirstDay = firstDay === 0 ? 6 : firstDay - 1;

      // Number of days in the month
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      // Clear previous days
      calendarDays.innerHTML = '';

      // Add empty cells for days before the first day of the month
      for (let i = 0; i < adjustedFirstDay; i++) {
        const emptyCell = document.createElement('div');
        emptyCell.classList.add('h-10', 'md:h-14'); // Placeholder height
        calendarDays.appendChild(emptyCell);
      }

      // Add days
      for (let day = 1; day <= daysInMonth; day++) {
        const dayCell = document.createElement('div');
        dayCell.classList.add(
          'h-10',
          'md:h-14',
          'flex',
          'items-center',
          'justify-center',
          'rounded-xl',
          'text-sm',
          'md:text-base',
          'font-medium',
          'transition-all',
          'duration-200',
        );

        // Random "Occupied" Logic for demo visualization
        // In reality, checkout consistent date checking
        // For simplicity, we just check against our mock list and add some entropy based on month
        const isOccupied =
          occupiedDates.includes(day) || (day % 7 === 0 && month % 2 === 0);

        if (isOccupied) {
          dayCell.classList.add(
            'bg-red-50',
            'text-red-400',
            'cursor-not-allowed',
          );
          dayCell.title = 'Fecha no disponible';
        } else {
          dayCell.classList.add(
            'bg-green-50',
            'text-green-700',
            'hover:bg-green-100',
            'cursor-pointer',
            'border',
            'border-transparent',
            'hover:border-green-200',
          );
          dayCell.title = 'Fecha disponible';

          // Interaction: Scroll to contact on click
          dayCell.onclick = () => {
            const contactSection = document.getElementById('contacto');
            if (contactSection) {
              contactSection.scrollIntoView({ behavior: 'smooth' });
              // Optional: You could pre-fill a date field in the form here
            }
          };
        }

        // Highlight today
        const today = new Date();
        if (
          day === today.getDate() &&
          month === today.getMonth() &&
          year === today.getFullYear()
        ) {
          dayCell.classList.add('ring-2', 'ring-primary-400', 'font-bold');
        }

        dayCell.textContent = day;
        calendarDays.appendChild(dayCell);
      }
    }

    // Initial Render
    renderCalendar(currentDate);

    // Event Listeners
    prevBtn.addEventListener('click', () => {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar(currentDate);
    });

    nextBtn.addEventListener('click', () => {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar(currentDate);
    });
  });
</script>
